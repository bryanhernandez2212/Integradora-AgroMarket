<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Productos - AgroMarket</title>
    <link rel="stylesheet" href="/static/css/navbar.css">
    <link rel="stylesheet" href="/static/css/estilos_vendedor.css">
    <link rel="stylesheet" href="/static/css/mis_productos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body data-page="mis-productos">
<nav>
    <div class="nav-left">
        <div class="logo"><h2>AgroMarket</h2></div>
        <div class="saludo-usuario">Hola, <strong>{{ nombre }}</strong></div>
    </div>
    <div class="menu">
        <a href="/vendedor/panel" {% if page == 'inicio' %}class="activo"{% endif %}>Home</a>
        <a href="/vendedor/agregar_producto" {% if page == 'agregar' %}class="activo"{% endif %}>Agregar Productos</a>
        <a href="/vendedor/mis_productos" {% if page == 'productos' %}class="activo"{% endif %}>Mis Productos</a>
        <a href="#" onclick="alert('Función próximamente')">Ventas</a>
        <a href="/vendedor/chats" {% if page == 'chats' %}class="activo"{% endif %}>Chats</a>
        <a href="#" onclick="alert('Función próximamente')">Mi Perfil</a>
        <a href="#" onclick="cerrarSesion()">Cerrar Sesión</a>
    </div>
</nav>

<main>
    <div class="container">
        <div class="header">
            <h1>Mis productos</h1>
            <p>Administre su inventario: edite, pause o elimine productos.</p>
        </div>
        
        <div class="filters-section">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Buscar por nombre..." class="search-input">
            </div>
            <div class="filter-buttons">
                <button class="filter-btn" id="categoryFilter">Categoría</button>
                <button class="filter-btn" id="statusFilter">Estado</button>
                <button class="add-btn" onclick="window.location.href='/vendedor/agregar_producto'">
                    <i class="fas fa-plus"></i> Agregar
                </button>
            </div>
        </div>
        
        <div class="products-table-container">
            <div class="table-header">
                <div class="table-cell">Producto</div>
                <div class="table-cell">Categoría</div>
                <div class="table-cell">Precio</div>
                <div class="table-cell">Stock</div>
                <div class="table-cell">Unidad</div>
                <div class="table-cell">Acciones</div>
            </div>
            
            <div id="productsContainer" class="table-body">
                <p>Cargando productos...</p>
            </div>
        </div>
        
        <div class="pagination-container" id="paginationContainer" style="display: none;">
            <div class="pagination-info">
                <span id="paginationInfo">Mostrando 1-3 de 24 productos</span>
            </div>
            <div class="pagination-buttons">
                <button class="pagination-btn" id="prevBtn">Anterior</button>
                <button class="pagination-btn" id="nextBtn">Siguiente</button>
            </div>
        </div>
        
        <div class="status-box" id="statusBox" style="display: none;">
            <strong>Estado del Sistema:</strong><br>
            <span id="statusText">Iniciando...</span>
        </div>
    </div>
</main>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

<!-- Firebase Instant & lógica de productos -->
<script src="/static/js/firebase-instant.js"></script>
<!-- Protección contra acceso después de logout -->
<script src="{{ url_for('static', filename='js/auth-protection.js') }}"></script>
<script src="{{ url_for('static', filename='js/productos-common.js') }}"></script>
<script src="{{ url_for('static', filename='js/mis-productos.js') }}"></script>
</body>
</html>
